# Dynamic Lake Monitoring: Time-Series Analysis of Surface Area and Volume using Satellite Imagery

[](https://www.python.org/downloads/)
[](https://opensource.org/licenses/MIT)

An end-to-end Python-based project that leverages Google Earth Engine (GEE) and public datasets to monitor the volumetric changes of inland water bodies over time. This tool provides a powerful, scalable, and cost-effective solution for environmental monitoring and hydrological studies.

This project demonstrates a complete workflow: from fetching raw satellite and in-situ data to performing complex geospatial analysis and generating insightful visualizations.

## Key Features

  - **Automated Data Acquisition:** Fetches Sentinel-2 satellite imagery and bathymetry data directly from Google Earth Engine.
  - **Intelligent Cloud Filtering:** Implements a robust two-stage cloud removal process, filtering by image metadata (`CLOUDY_PIXEL_PERCENTAGE`) and performing pixel-level masking using the QA band.
  - **Accurate Water Extraction:** Uses the Automated Water Extraction Index (AWEI) to accurately delineate the water body surface from satellite imagery.
  - **Volumetric Estimation:** Combines the extracted water surface area with bathymetry data from the GLOBathy dataset to estimate the lake's total water volume.
  - **Time-Series Analysis:** Generates a clean time-series DataFrame of lake surface area and volume.
  - **Rich Visualization:** Creates insightful, publication-ready plots to visualize trends, changes, and the raw geospatial data.

## Visual Demo

Below are examples of the outputs generated by this project.
![full](https://github.com/user-attachments/assets/f8a87dd0-0baf-4855-82c6-0c81b9c106ad)


#### Time-Series Analysis Plot

*The generated plot shows the standardized trends of the lake's surface area and volume, alongside their daily changes.*

#### Geospatial Data Overlay

*This interactive map view allows for a qualitative assessment of the data, showing the true color image, the underlying bathymetry, and the final extracted water mask.*
*(**Note:** To create this image, take a screenshot of the interactive map from your notebook).*

## Methodology

The project follows a systematic workflow to derive lake dynamics from remote sensing data:

1.  **Image Collection:** A time-series `ImageCollection` of Sentinel-2 Surface Reflectance data is created for a user-defined Area of Interest (AOI) and date range.
2.  **Cloud Removal:** The collection is first filtered to remove images with cloud cover exceeding a set threshold. A cloud-masking function is then mapped over the remaining images to remove any lingering cloud and cirrus pixels based on the 'QA60' band.
3.  **Water Body Delineation:** For each image, the **Automated Water Extraction Index (AWEI)** is calculated. AWEI is effective at separating water from shadows and other dark surfaces. A threshold is applied to the AWEI image to create a binary water mask.
    $$
    $$$$AWEI\_{sh} = B\_{Blue} + 2.5 \\times B\_{Green} - 1.5 \\times (B\_{NIR} + B\_{SWIR1}) - 0.25 \\times B\_{SWIR2}
    $$
    $$$$
    $$
4.  **Area Calculation:** The surface area is calculated by counting the number of water pixels in the mask and multiplying by the pixel area (`ee.Image.pixelArea()`).
5.  **Volume Estimation:** The water mask is used to clip the **GLOBathy** dataset, isolating the lake bed bathymetry. The volume of each pixel is calculated as (Pixel Area Ã— Pixel Depth). A total sum reduction yields the final estimated lake volume.
6.  **Visualization:** The resulting time-series data is standardized (Z-score normalization) to allow for trend comparison on a single axis and plotted using Matplotlib.

## Tech Stack & Dependencies

  - **Python 3.9+**
  - **Google Earth Engine Python API (`earthengine-api`):** For all satellite data access and processing.
  - **Geemap:** For interactive visualization of geospatial data within the Jupyter environment.
  - **Pandas:** For data manipulation and management of the final time-series DataFrame.
  - **Matplotlib:** For creating static, publication-quality plots.
  - **Scikit-learn:** For standardizing data before visualization.
  - **dataretrieval:** (Optional, if using in-situ data) For fetching data from USGS NWIS.

## Setup and Installation

1.  **Clone the Repository:**

    ```bash
    git clone https://github.com/your-username/your-repo-name.git
    cd your-repo-name
    ```

2.  **Install Dependencies:**
    It is recommended to use a virtual environment.

    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows, use `venv\Scripts\activate`
    pip install -r requirements.txt
    ```

    *A `requirements.txt` file should contain:*

    ```
    earthengine-api
    geemap
    pandas
    matplotlib
    scikit-learn
    dataretrieval
    jupyter
    ```

3.  **Authenticate Google Earth Engine:**
    You will need a GEE account. Run the following command in your terminal and follow the authentication steps in your browser.

    ```bash
    earthengine authenticate
    ```

## How to Use

1.  **Launch Jupyter:**
    ```bash
    jupyter notebook
    ```
2.  **Open the Notebook:** Open the `.ipynb` file containing the project code.
3.  **Configure Parameters:** In the main script, modify the following parameters in the configuration cells to match your target lake and time frame:
      - `aoi`: Define the polygon for your area of interest.
      - `start_date` / `end_date`: Set your desired time range.
      - `CLOUD_COVER_THRESHOLD`: Adjust the percentage for cloud filtering (e.g., `20`).
      - **AWEI Threshold:** This is the most critical parameter to tune. Use the visualization notebooks to inspect the AWEI values for your specific lake and adjust the threshold in the `get_water_mask` function accordingly (e.g., `awei.gt(-0.2)`).
4.  **Run the Cells:** Execute the notebook cells sequentially. The script will process the data on Google's servers and display the final plots and DataFrame. The output plots will also be saved as `.png` files in the project directory.

## License

This project is licensed under the MIT License. See the `LICENSE` file for details.

## Acknowledgments

  - Data provided by the **Copernicus Sentinel-2 program**.
  - Bathymetry data provided by the **GLOBathy dataset**.
  - This project is powered by the **Google Earth Engine** platform.
